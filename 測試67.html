<!DOCTYPE html>
<html lang="zh-Hant-TW">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=5" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
		<style>
			* {
				padding: 0;
				margin: 0;
			}
			.box {
				width: 300px;
				height: 300px;
				background-color: gray;
				display: flex;
				justify-content: center;
				align-items: center;
				font-size: 24px;
				touch-action: none;
				user-select: none;
				-ms-user-select: none;
				-moz-user-select: none;
				-webkit-user-select: none;
				-webkit-touch-callout: none;
			}
			.red {
				color: red;
			}
			.touch {
				opacity: 0.5;
			}
		</style>
	</head>
	<body>
		<div class="box">
			<span>BOX</span>
		</div>
		<script>
			var touchDuration = 400;
			var touchTime;
			var touchRun = false;
			var oBox = document.querySelector(".box");
			oBox.addEventListener("touchstart", function (e) {
				e.preventDefault();
				oBox.classList.add("touch");
				if (!touchRun) {
					clearTimeout(touchTime);
					touchTime = setTimeout(() => {
						oBox.innerHTML += "=長按=";
						touchRun = true;
					}, touchDuration);
				}
			});

			oBox.addEventListener("touchend", function (e) {
				oBox.classList.remove("touch");
				if (touchRun) {
					clearTimeout(touchTime);
					touchRun = false;
				} else {
					clearTimeout(touchTime);
					touchTime = null;
					touchRun = false;
				}
			});
		</script>
	</body>
</html>
