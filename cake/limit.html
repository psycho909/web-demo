<!DOCTYPE html>
<html>
	<head>
		<script src="https://unpkg.com/konva@8.1.3/konva.min.js"></script>
		<meta charset="utf-8" />
		<title>Konva Complex Drag and Drop Bounds Demo</title>
		<style>
			body {
				margin: 0;
				padding: 0;
				overflow: hidden;
				background-color: #f0f0f0;
			}
		</style>
	</head>
	<body>
		<div id="container"></div>
		<script>
			var width = window.innerWidth;
			var height = window.innerHeight;

			var stage = new Konva.Stage({
				container: "container",
				width: width,
				height: height,
			});

			var layer = new Konva.Layer();

			// bound below y=50
			var matrix = { row: 5, col: 5 },
				blockSize = 75;
			var blueRect = new Konva.Rect({
				width: 50,
				height: 50,
				fill: "#aaf",
				stroke: "black",
				strokeWidth: 4,
				draggable: true,
				dragBoundFunc: function (pos) {
					return {
						x: Math.max(0, Math.min(200, pos.x)),
						y: Math.max(0, Math.min(200, pos.y)),
						// x: pos.x < 0 ? 0 : pos.x > (matrix.row - this.attrs.width / blockSize) * blockSize ? (matrix.row - this.attrs.width / blockSize) * blockSize : pos.x,
						// y: pos.y < 0 ? 0 : pos.y > (matrix.col - this.attrs.height / blockSize) * blockSize ? (matrix.col - this.attrs.height / blockSize) * blockSize : pos.y,
					};
				},
			});
			// blueRect.on("dragmove", () => {
			// 	var x = Math.max(0, Math.min(600, blueRect.x()));
			// 	var y = Math.max(0, Math.min(600, blueRect.y()));
			// 	blueRect.x(x);
			// 	blueRect.y(y);
			// });
			layer.add(blueRect);

			// add the layer to the stage
			stage.add(layer);
		</script>
	</body>
</html>
