<!DOCTYPE html>
<html lang="zh-Hant-TW">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous" />

		<script src="https://unpkg.com/vue/dist/vue.js"></script>

		<style>
			* {
				padding: 0;
				margin: 0;
				box-sizing: border-box;
				font-family: Arial;
			}
			.grid {
				display: grid;
				grid-template-columns: 1fr;
			}
			.row {
				display: flex;
			}
			.col {
				width: 50%;
				text-align: center;
			}
		</style>
	</head>
	<body>
		<div id="app" class="py-3 container">
			<div class="row">
				<div class="col py-2">當前</div>
				<div class="col">
					<input class="form-control" type="number" v-model="current" />
				</div>
			</div>
			<div class="row">
				<div class="col py-2">買入價格</div>
				<div class="col py-2">賣出價格</div>
			</div>
			<div class="row">
				<div class="col">
					<input class="form-control" type="number" v-model="buy" />
				</div>
				<div class="col">
					<input class="form-control" type="number" v-model="sell" />
				</div>
			</div>
			<div class="row">
				<div class="col py-2">換得</div>
				<div class="col py-2">{{buyCanGet}}</div>
			</div>
			<div class="row">
				<div class="col py-2">賣出</div>
				<div class="col py-2">{{sellCanGet - current}}</div>
			</div>
			<div class="row">
				<div class="col py-2">漲幅%</div>
				<div class="col py-2">可獲得</div>
			</div>
			<div class="row" v-for="(f,index) in forecast">
				<div class="col py-2">{{percent[index]}}%</div>
				<div class="col py-2">{{f * buyCanGet - current}}</div>
			</div>
		</div>
		<script>
			var vm = new Vue({
				el: "#app",
				data: {
					percent: [0.01, 0.015, 0.02, 0.025, 0.03, 0.035, 0.04, 0.045, 0.05],
					forecast: [],
					buy: 0,
					sell: 0,
					current: 0,
				},
				computed: {
					buyCanGet() {
						if (this.current === 0 || this.buy === 0) {
							return 0;
						}
						return this.current / this.buy;
					},
					sellCanGet() {
						if (this.current === 0 || this.buy === 0) {
							return 0;
						}
						return this.sell * this.buyCanGet;
					},
				},
				watch: {
					buy: {
						immediate: false,
						handler(newV, olV) {
							this.forecast = [];
							this.percent.forEach((v, i) => {
								this.forecast.push(+newV + +newV * v);
							});
						},
					},
				},
			});

			var buy = 55724;
			var h = 1319;
			var percent = [0.01, 0.015, 0.02, 0.025, 0.03, 0.035, 0.04, 0.045, 0.05];
			var forecast = [];

			console.log(h / buy);
			console.log(forecast);
		</script>
	</body>
</html>
