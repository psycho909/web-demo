<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
		<script src="https://tw.hicdn.beanfun.com/plugins/gsap/3.4.0/gsap.min.js"></script>
		<style>
			.box {
				width: 392px;
				background: url("../images/event2-sprite.png");
				--steps: 13;
				background-size: calc(val(--steps) * 100%);
			}
		</style>
	</head>
	<body>
		<canvas id="canvas" width="180" height="180"></canvas>
		<script>
			var canvas = document.getElementById("canvas"),
				context = canvas.getContext("2d");

			function draw() {
				var img = new Image();
				img.onload = function () {
					context.drawImage(img, 0, 0);
				};
				img.src = "./bt_default/bt_default_0.png";
			}
			var t1 = gsap.timeline();

			var t1Anim = false;
			function BoatAnim() {
				var steps = 13;
				var bgx = -steps * 100 + "%";
				var s = 0.1;
				if (t1.repeat() === 0) {
					if (!t1.isActive()) {
						t1.set(".event-boat-bg", {
							backgroundPosition: 0
						});
						t1.to(".event-boat-bg", s * steps, {
							backgroundPosition: bgx,
							ease: SteppedEase.config(steps),
							onComplete: function () {
								t1.set(".event-boat-bg", {
									backgroundPosition: 0
								});
							}
						});
					} else {
						t1.restart();
					}
				}
				if (t1.repeat() === -1 && !t1Anim) {
					t1Anim = true;
					t1.set(".event-boat-bg", {
						backgroundPosition: 0
					});
					t1.to(".event-boat-bg", s * steps, {
						backgroundPosition: bgx,
						ease: SteppedEase.config(steps),
						onComplete: function () {
							t1.set(".event-boat-bg", {
								backgroundPosition: 0
							});
						}
					});
				}
			}
		</script>
	</body>
</html>
